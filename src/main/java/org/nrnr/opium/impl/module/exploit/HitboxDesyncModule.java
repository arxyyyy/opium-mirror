package org.nrnr.opium.impl.module.exploit;

import net.minecraft.util.math.Vec3d;
import org.nrnr.opium.api.event.listener.EventListener;
import org.nrnr.opium.api.module.ModuleCategory;
import org.nrnr.opium.api.module.ToggleModule;
import org.nrnr.opium.impl.event.TickEvent;

public class HitboxDesyncModule extends ToggleModule {

    public HitboxDesyncModule() {
        super("HitboxDesync", "Precisely offsets your position to glitch out Minecraft hitbox calculations.", ModuleCategory.EXPLOITS);
    }

    @EventListener(priority = Integer.MAX_VALUE)
    public void onTick(TickEvent event) {

        Vec3d vec3d = mc.player.getBlockPos().toCenterPos();

        boolean flagX = (vec3d.x - mc.player.getX()) > 0;
        boolean flagZ = (vec3d.z - mc.player.getZ()) > 0;

        double x = vec3d.x + 0.20000000009497754 * (flagX ? -1 : 1);
        double z = vec3d.z + 0.2000000000949811 * (flagZ ? -1 : 1);

        mc.player.setPosition(x, mc.player.getY(), z);

        toggle();
    }
}
