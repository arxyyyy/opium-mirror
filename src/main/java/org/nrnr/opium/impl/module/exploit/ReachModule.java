package org.nrnr.opium.impl.module.exploit;

import org.nrnr.opium.api.config.Config;
import org.nrnr.opium.api.config.setting.BooleanConfig;
import org.nrnr.opium.api.config.setting.NumberConfig;
import org.nrnr.opium.api.event.listener.EventListener;
import org.nrnr.opium.api.module.ModuleCategory;
import org.nrnr.opium.api.module.ToggleModule;
import org.nrnr.opium.impl.event.network.ReachEvent;
import org.nrnr.opium.impl.event.render.TargetEntityEvent;

/**
 * @author chronos
 * @since 1.0
 */
public class ReachModule extends ToggleModule {
    //
    Config<Float> reachConfig = new NumberConfig<>("Reach", "The extended reach distance", 0.0f, 0.0f, 3.0f);
    Config<Boolean> noHitboxConfig = new BooleanConfig("NoHitbox", "Ignores hitboxes allowing player to interact through entities", false);

    /**
     *
     */
    public ReachModule() {
        super("Reach", "Extends player reach", ModuleCategory.EXPLOITS);
    }

    @Override
    public String getModuleData() {
        return Float.toString(reachConfig.getValue());
    }

    @EventListener
    public void onReach(ReachEvent event) {
        event.cancel();
        event.setReach(reachConfig.getValue());
    }

    @EventListener
    public void onTargetEntity(TargetEntityEvent event) {
        event.setCanceled(noHitboxConfig.getValue());
    }
}
